CREATE DATABASE quanliquannet;

CREATE TABLE `customers` (
  `id_nguoi` int(8) NOT NULL PRIMARY KEY,
  `taikhoan` varchar(20) NOT NULL KEY,
  `matkhau` varchar(32) NOT NULL KEY,
  `SoDu` int(10) NOT NULL,
  `SoMay` int(2) NOT NULL KEY
);

CREATE TABLE `donhang` (
  `id_don` int(8) NOT NULL PRIMARY KEY,
  `id_sp` int(8) NOT NULL KEY,
  `id_nguoi` int(8) NOT NULL KEY,
  `tg_dat` datetime NOT NULL,
  `ten_sp` varchar(1000) NOT NULL KEY,
  `gia` int(7) NOT NULL,
  `SoMay` int(2) NOT NULL KEY
);

CREATE TABLE `fooddrink` (
  `id_sp` int(8) NOT NULL PRIMARY KEY,
  `ten_sp` varchar(1000) NOT NULL KEY,
  `gia` int(7) NOT NULL,
  `hinhanh` varchar(255) NOT NULL
);

CREATE TABLE `game` (
  `id_game` int(8) NOT NULL PRIMARY KEY,
  `ten_game` varchar(1000) NOT NULL,
  `thongtin_game` varchar(10000) NOT NULL,
  `image_game` varchar(255) NOT NULL
);

CREATE TABLE `gameaccount` (
  `id_nguoi` int(8) NOT NULL PRIMARY KEY,
  `taikhoan` varchar(20) NOT NULL KEY,
  `matkhau` varchar(32) NOT NULL KEY,
  `avatar` varchar(255) DEFAULT NULL,
  `gia` int(7) NOT NULL,
  `id_game` int(8) NOT NULL KEY
);

ALTER TABLE `customers`
  ADD CONSTRAINT `customers_ibfk_1` FOREIGN KEY (`taikhoan`) REFERENCES `gameaccount` (`taikhoan`) ON UPDATE CASCADE,
  ADD CONSTRAINT `customers_ibfk_2` FOREIGN KEY (`SoMay`) REFERENCES `donhang` (`SoMay`) ON UPDATE CASCADE;

ALTER TABLE `donhang`
  ADD CONSTRAINT `donhang_ibfk_1` FOREIGN KEY (`id_sp`) REFERENCES `fooddrink` (`id_sp`) ON UPDATE CASCADE;

ALTER TABLE `gameaccount`
  ADD CONSTRAINT `gameaccount_ibfk_1` FOREIGN KEY (`matkhau`) REFERENCES `customers` (`matkhau`) ON UPDATE CASCADE,
  ADD CONSTRAINT `gameaccount_ibfk_2` FOREIGN KEY (`id_game`) REFERENCES `game` (`id_game`) ON UPDATE CASCADE;
COMMIT;
